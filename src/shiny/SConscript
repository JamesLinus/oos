# vim: syntax=python

Import('env', 'arch', 'buildtype', 'distreq')

sources = []

shiny = env.Clone()

Export('sources', 'shiny')
SConscript('boot/%s/SConscript' % arch)
SConscript('hal/%s/SConscript' % arch)

ooc = env.Clone()
ooc.Append(OOCFLAGS=['-sourcepath=src/shiny', '-sourcepath=src/shiny/hal/%s' % arch])

ooclib = ooc.ooc('ooc.lib', 'init/init.ooc')

Clean(ooclib, '#ooc_tmp')

sources += [
  'printf.c',
  ooclib
]

shinyexe = shiny.Program('shiny', sources)

distreq += [shinyexe]

